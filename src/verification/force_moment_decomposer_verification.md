# Force Moment Decomposer Verification Tests

This document describes the verification tests for the force moment decomposer functions used in the rocket physics simulation.

## Overview

The force moment decomposer functions are responsible for calculating the forces and moments generated by different control systems during various flight phases. These functions are critical for accurate simulation of the rocket's dynamics.

## Tested Functions

1. `force_moment_decomposer_ascent`
   - Handles ascent phase force and moment calculations
   - Inputs: gimbal angle, throttle, atmospheric conditions
   - Outputs: thrust components, moment, mass flow
   - Test Cases:
     - Zero gimbal, full throttle
     - Maximum gimbal, half throttle
   - Results: ✅ All tests passed

2. `force_moment_decomposer_flipoverboostbackburn`
   - Manages flip-over and boostback burn phase
   - Inputs: gimbal angle command, previous state
   - Outputs: thrust components, moment, mass flow
   - Test Cases:
     - Zero command, previous angle zero
     - Maximum command, previous angle zero
   - Results: ✅ All tests passed

3. `force_moment_decomposer_re_entry_landing_burn`
   - Controls re-entry and landing burn phase
   - Inputs: gimbal angle, throttle, aerodynamic conditions
   - Outputs: control forces, moment, mass flow
   - Test Cases:
     - Zero commands, zero angles
     - Maximum commands
   - Results: ✅ All tests passed

4. `ACS` (Attitude Control System)
   - Handles aerodynamic control surfaces
   - Inputs: deflection commands, flight conditions
   - Outputs: aerodynamic forces and moments
   - Test Cases:
     - Zero deflection
     - Maximum deflection
     - Zero effective angle of attack
     - Zero effective angle of attack with minimum deflection
   - Results: ✅ All tests passed

5. `RCS` (Reaction Control System)
   - Manages reaction control thrusters
   - Inputs: thruster commands
   - Outputs: control forces and moments
   - Test Cases:
     - Zero command
     - Maximum command
   - Results: ✅ All tests passed

## Test Results Summary

All verification tests have passed successfully:
- Total Tests: 5
- Passed: 5
- Failed: 0

## Implementation Details

### Ascent Decomposer
- Throttle calculation correctly implements: `throttle = non_nominal_throttle * (1 - nominal_throttle) + nominal_throttle`
- Gimbal angle properly scales input commands
- Thrust and moment calculations account for atmospheric pressure

### Flip-over Boostback Decomposer
- First-order low-pass filter correctly implemented for gimbal angle
- Thrust calculations maintain proper scaling
- Moment calculations account for thrust vector offset

### Re-entry Landing Decomposer
- Combines thrust and aerodynamic control forces
- Properly handles gimbal angle and throttle commands
- Correctly calculates mass flow rate

### ACS
- Force calculations properly account for deflection angles
- Moment calculations correctly use moment arm
- Zero deflection case produces expected forces
- Zero effective angle of attack case properly handled

### RCS
- Force and moment calculations properly scale with input commands
- Zero command case produces zero forces and moments
- Maximum command case produces expected moment values